{% extends 'core/base.html' %}

{% block title %}
  メインメニュー | GreenReceipt
{% endblock %}

{% block content %}
  <div class="welcome-container">
    <h1 style="font-size: 24px;">ようこそ、{{ user.username }}さん</h1>
  </div>

  <section class="rank-box">
    <h2>あなたのランク</h2>
    <div class="rank-image-container" style="text-align: center; margin: 20px 0;">
      {% load static %}
      <img src="{% static 'img/rank_'|add:rank|add:'.png' %}" alt="{{ user.get_rank_display }}" style="max-width: 200px; height: auto; display: block; margin: 0 auto;">
    </div>
    <h2>{{ user.get_rank_display }}</h2>
    <div class="eco-point">{{ current_points }} エコポイント</div>

    <div class="rank-progress-container" style="margin-top: 15px;">
      {% if next_rank_points %}
        <div class="progress-bar-wrapper" style="background-color: #e0e0e0; border-radius: 10px; height: 20px; width: 100%; overflow: hidden;">
          <div class="progress-bar" style="background-color: #4caf50; height: 100%; width: {{ progress_percentage }}%;"></div>
        </div>
        <p style="font-size: 0.9em; color: #666; margin-top: 5px;">
          次のランクまであと {{ points_to_next }} ポイント
        </p>
      {% else %}
        <p style="font-size: 0.9em; color: #4caf50; font-weight: bold;">最高ランク到達！</p>
      {% endif %}
    </div>
  </section>

  <div class="buttons">
    <a href="{% url 'core:coupon_list' %}" class="btn">所持クーポン一覧</a>
    <a href="{% url 'core:store_map' %}" class="btn">加盟店マップ</a>
  </div>
{% endblock %}
